import streamlit as st

# –ë–µ—Ç—Ç—ñ“£ –±–∞–ø—Ç–∞—É–ª–∞—Ä—ã
st.set_page_config(page_title="–¢–∞—Ä–∏—Ö –¢–µ—Å—Ç", page_icon="üìö")

# –¢–µ—Å—Ç –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ (–§–∞–π–ª –±–æ–π—ã–Ω—à–∞ —Ç–æ–ª—ã“õ—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã)
questions_data = {
    "¬ß1. –ñ–∞“£–∞ –∑–∞–º–∞–Ω –¥”ô—É—ñ—Ä—ñ": [
        {"q": "–î“Ø–Ω–∏–µ–∂“Ø–∑—ñ —Ç–∞—Ä–∏—Ö—ã–Ω–¥–∞“ì—ã ¬´–ñ–∞“£–∞ –∑–∞–º–∞–Ω¬ª “±“ì—ã–º—ã –ø–∞–π–¥–∞ –±–æ–ª–¥—ã:", "options": ["“ö–∞–π—Ç–∞ ”©—Ä–ª–µ—É –∫–µ–∑–µ“£—ñ–Ω–¥–µ", "–ê“ì–∞—Ä—Ç—É—à—ã–ª—ã“õ –∫–µ–∑–µ“£—ñ–Ω–¥–µ", "–≠–ª–ª–∏–Ω–¥—ñ–∫ –∫–µ–∑–µ“£–¥–µ", "–ê–Ω—Ç–∏–∫–∞–ª—ã“õ –∫–µ–∑–µ“£–¥–µ"], "answer": "“ö–∞–π—Ç–∞ ”©—Ä–ª–µ—É –∫–µ–∑–µ“£—ñ–Ω–¥–µ"},
        {"q": "–ò–Ω–¥—É—Å—Ç—Ä–∏—è–ª—ã“õ ”©—Ä–∫–µ–Ω–∏–µ—Ç—Ç—ñ“£ –æ—Ç–∞–Ω—ã:", "options": ["–§—Ä–∞–Ω—Ü–∏—è", "–ì–µ—Ä–º–∞–Ω–∏—è", "–ê–Ω–≥–ª–∏—è", "–ê“ö–®"], "answer": "–ê–Ω–≥–ª–∏—è"}
    ],
    "¬ß2. –ê“ì—ã–ª—à—ã–Ω —Ä–µ–≤–æ–ª—é—Ü–∏—è—Å—ã": [
        {"q": "1649 –∂. —Ä–µ—Å–ø—É–±–ª–∏–∫–∞ –±–æ–ª—ã–ø –∂–∞—Ä–∏—è–ª–∞–Ω–¥—ã:", "options": ["–ì–µ—Ä–º–∞–Ω–∏—è", "–ê–Ω–≥–ª–∏—è", "–ò—Ç–∞–ª–∏—è", "–§—Ä–∞–Ω—Ü–∏—è"], "answer": "–ê–Ω–≥–ª–∏—è"},
        {"q": "–ñ–∞“£–∞ –¥–≤–æ—Ä—è–Ω–¥–∞—Ä–¥—ã“£ –∞—Ç–∞—É—ã:", "options": ["–õ–æ—Ä–¥—Ç–∞—Ä", "–î–∂–µ–Ω—Ç—Ä–∏–ª–µ—Ä", "–†—ã—Ü–∞—Ä—å–ª–∞—Ä", "–ë—É—Ä–∂—É–∞–∑–∏—è"], "answer": "–î–∂–µ–Ω—Ç—Ä–∏–ª–µ—Ä"}
    ]
}

def main():
    st.title("üá∞üáø –î“Ø–Ω–∏–µ–∂“Ø–∑—ñ —Ç–∞—Ä–∏—Ö—ã (7-—Å—ã–Ω—ã–ø)")
    st.subheader("–¢–µ—Å—Ç –æ—Ä—ã–Ω–¥–∞—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã")

    # 1. –¢–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–∞“£–¥–∞—É
    topic = st.sidebar.selectbox("–¢–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:", list(questions_data.keys()))
    
    if "answers" not in st.session_state:
        st.session_state.answers = {}

    st.info(f"–¢–∞“õ—ã—Ä—ã–ø: {topic}")

    # 2. –¢–µ—Å—Ç —Å“±—Ä–∞“õ—Ç–∞—Ä—ã–Ω —à—ã“ì–∞—Ä—É
    score = 0
    current_questions = questions_data[topic]
    
    with st.form("test_form"):
        user_responses = {}
        for i, q_item in enumerate(current_questions):
            st.write(f"**{i+1}. {q_item['q']}**")
            user_responses[i] = st.radio(f"–ñ–∞—É–∞–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑ ({i}):", q_item['options'], key=f"q_{topic}_{i}", label_visibility="collapsed")
            st.write("---")
        
        submit = st.form_submit_button("–ù”ô—Ç–∏–∂–µ–Ω—ñ —Ç–µ–∫—Å–µ—Ä—É")

    # 3. –ù”ô—Ç–∏–∂–µ –∂”ô–Ω–µ “õ–∞—Ç–µ–º–µ–Ω –∂“±–º—ã—Å
    if submit:
        st.success("–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã! –¢”©–º–µ–Ω–¥–µ–≥—ñ –Ω”ô—Ç–∏–∂–µ–Ω—ñ –∫”©—Ä—ñ“£—ñ–∑:")
        correct_count = 0
        
        for i, q_item in enumerate(current_questions):
            if user_responses[i] == q_item['answer']:
                correct_count += 1
                st.write(f"‚úÖ {i+1}-—Å“±—Ä–∞“õ: –î“±—Ä—ã—Å!")
            else:
                st.write(f"‚ùå {i+1}-—Å“±—Ä–∞“õ: “ö–∞—Ç–µ!")
                st.warning(f"–°—ñ–∑–¥—ñ“£ –∂–∞—É–∞–±—ã“£—ã–∑: {user_responses[i]} | **–î“±—Ä—ã—Å –∂–∞—É–∞–ø: {q_item['answer']}**")
        
        st.metric("–ñ–∞–ª–ø—ã “±–ø–∞–π", f"{correct_count} / {len(current_questions)}")

if __name__ == "__main__":
    main()
